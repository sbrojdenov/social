<div class="row" ng-controller = "messageCtr">

    <div class="col-md-4">
        <div class="panel panel-default">
            <div class="panel-body">
                <div>
                    <img src="img/m.jpg" widht="70px" height="50px" />
                    <span class="right-name"><strong><a>Ivan Petrov</a></strong></span>
                    <hr>
                </div>
                <div>
                    <img src="img/m.jpg" widht="70px" height="50px" />
                    <span class="right-name"><strong><a>Ivan Petrov</a></strong></span>
                    <hr>
                </div>
                <div>
                    <img src="img/m.jpg" widht="70px" height="50px" />
                    <span class="right-name"><strong><a>Ivan Petrov</a></strong></span>
                    <hr>
                </div>
                <div>
                    <img src="img/m.jpg" widht="70px" height="50px" />
                    <span class="right-name"><strong><a>Ivan Petrov</a></strong></span>
                    <hr>
                </div>
            </div>

        </div>
    </div>
    <div class="col-md-8">
        <div class="panel panel-default">
            <div class="panel-body" >
                <ul id="messages"></ul>
                <form id="myForm">
                    <span id="notifyUser"></span>
                    <input type="hidden" id="user" value="Stefan" />
                    <input id="m" onkeyup="notifyTyping();" autocomplete="off" /><button id="btnDel">Send</button>
                </form>

            </div>
        </div>
    </div>
</div>

<script>

            var socket = io('http://localhost:3000/');
            $('#myForm').submit(function () {
                socket.emit('chat message', $('#user').val(), $('#m').val());
                $('#m').val('');
                return false;
            });

            function notifyTyping() {
                var user = $('#user').val();
                socket.emit('notifyUser', user);
            }

            socket.on('chat message', function (from, msg) {
                $('#messages').append($('<li>').text(from));
                $('#messages').append($('<li>').text(msg));
            });

            socket.on('notifyUser', function (user) {
                var me = $('#user').val();

                $('#notifyUser').text(user + ' is typing ...');

                setTimeout(function () {
                    $('#notifyUser').text('');
                }, 10000);
                ;
            });

</script>
